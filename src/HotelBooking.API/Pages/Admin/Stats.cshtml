@page
@model HotelBooking.API.Pages.Admin.StatsModel
@{
    ViewData["Title"] = "Booking Statistics";
}

<div class="min-h-screen bg-gray-900 text-gray-100 p-6">
    <h1 class="text-3xl font-bold mb-6">Booking Statistics</h1>

    <form method="post" class="mb-8 grid grid-cols-1 md:grid-cols-4 gap-4 items-end">
        <div>
            <label class="block mb-1 font-semibold">Select Hotel:</label>
            <select asp-for="SelectedHotelId" class="w-full px-3 py-2 rounded bg-gray-800 text-gray-100 border border-gray-700">
                <option value="">All Hotels</option>
                @foreach (var hotel in Model.Hotels)
                {
                    <option value="@hotel.Id">@hotel.Name</option>
                }
            </select>
        </div>

        <div>
            <label class="block mb-1 font-semibold">From Date:</label>
            <input asp-for="FromDate" type="date" class="w-full px-3 py-2 rounded bg-gray-800 text-gray-100 border border-gray-700" />
        </div>

        <div>
            <label class="block mb-1 font-semibold">To Date:</label>
            <input asp-for="ToDate" type="date" class="w-full px-3 py-2 rounded bg-gray-800 text-gray-100 border border-gray-700" />
        </div>

        <div>
            <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded font-semibold">
                Get Stats
            </button>
        </div>
    </form>

    <div class="overflow-x-auto">
        <table class="min-w-full border-collapse border border-gray-700">
            <thead class="bg-gray-800 text-gray-100">
                <tr>
                    <th class="border px-4 py-2 text-left">Hotel</th>
                    <th class="border px-4 py-2 text-left">Number of Bookings</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.Stats.Any())
                {
                    @foreach (var stat in Model.Stats)
                    {
                        <tr class="hover:bg-gray-700">
                            <td class="border px-4 py-2">@stat.HotelName</td>
                            <td class="border px-4 py-2">@stat.BookingCount</td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="2" class="border px-4 py-2 text-center text-gray-400">
                            No bookings found for selected criteria.
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>


<style>
    /* Autofill color fix for dark theme */
    input:-webkit-autofill,
    input:-webkit-autofill:hover,
    input:-webkit-autofill:focus,
    input:-webkit-autofill:active {
        -webkit-box-shadow: 0 0 0px 1000px #1f2937 inset;
        -webkit-text-fill-color: #f9fafb;
        transition: background-color 5000s ease-in-out 0s;
    }
    </style>
